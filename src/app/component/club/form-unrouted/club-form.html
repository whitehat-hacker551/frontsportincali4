<div class="container my-4 edit-form">
	<div class="row justify-content-center">
		<div class="col-12 col-lg-8">
			<div class="form-card">

				@if (loading()) {
				<div class="d-flex justify-content-center my-5">
					<div class="spinner-border text-primary" role="status">
						<span class="visually-hidden">Cargando...</span>
					</div>
				</div>
				}

				@if (error()) {
				<div class="alert alert-danger" role="alert">
					<i class="bi bi-exclamation-triangle me-2"></i>{{ error() }}
				</div>
				}

				@if (!loading() && !error()) {
				<form [formGroup]="clubForm" (ngSubmit)="onSubmit()" novalidate>
					@if (isEditMode) {
					<div class="mb-4">
						<label for="id" class="form-label">ID del club</label>
						<input type="text" class="form-control" id="id" formControlName="id" readonly />
					</div>
					}

					<div class="mb-4">
						<label for="nombre" class="form-label">Nombre <span class="text-danger">*</span></label>
						<input
							type="text"
							class="form-control"
							[class.is-invalid]="nombre?.invalid && nombre?.touched"
							[class.is-valid]="nombre?.valid && nombre?.touched"
							id="nombre"
							formControlName="nombre"
							placeholder="Introduce el nombre del club"
						/>
						@if (nombre?.invalid && nombre?.touched) {
						<div class="invalid-feedback">
							@if (nombre?.errors?.['required']) {
							<span>El nombre es obligatorio.</span>
							} @else if (nombre?.errors?.['minlength']) {
							<span>El nombre debe tener al menos 3 caracteres.</span>
							} @else if (nombre?.errors?.['maxlength']) {
							<span>El nombre no puede superar 255 caracteres.</span>
							}
						</div>
						}
					</div>

					<div class="mb-4">
						<label for="direccion" class="form-label">Dirección</label>
						<input type="text" class="form-control" id="direccion" formControlName="direccion" />
					</div>

					<div class="mb-4">
						<label for="telefono" class="form-label">Teléfono</label>
						<input type="text" class="form-control" id="telefono" formControlName="telefono" />
					</div>

					<div class="mb-4">
						<label for="fechaAlta" class="form-label">Fecha de alta <span class="text-danger">*</span></label>
						<input type="date" class="form-control" id="fechaAlta" formControlName="fechaAlta" />
					</div>

					<div class="mb-4">
						<label for="imagen" class="form-label">Imagen</label>
						<input
							type="text"
							class="form-control"
							id="imagen"
							formControlName="imagen"
							placeholder="URL o identificador de imagen"
						/>
					</div>

					<div class="d-flex justify-content-between align-items-center mt-4">
						<button type="button" class="btn btn-outline-secondary" (click)="onCancel()">
							<i class="bi bi-arrow-left me-2"></i>Cancelar
						</button>
						<button type="submit" class="btn btn-primary" [disabled]="loading() || clubForm.invalid">
							@if (loading()) {
							<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
							} @else {
							<i class="bi bi-check-circle me-2"></i>
							}
							@if (isEditMode) {Guardar Cambios} @else {Crear}
						</button>
					</div>
				</form>
				}
			</div>
		</div>
	</div>
</div>
